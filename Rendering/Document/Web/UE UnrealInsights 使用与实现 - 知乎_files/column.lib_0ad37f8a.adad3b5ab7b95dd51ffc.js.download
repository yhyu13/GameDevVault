(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{479:function(e,t,o){"use strict";o.d(t,"a",(function(){return k})),o.d(t,"c",(function(){return T}));var n=o(20),a=o.n(n),i=o(30),c=o.n(i),r=o(34),l=o.n(r),s=o(166),d=o(1),p=o(5),u=o(934),g=o(7),f=o.n(g),b=o(250),x=o(9),h=o(173),v=o.n(h),m=o(212),C=o(752),j=o(3),O=["children","pl","targetId","handleScroll","handleAction","index","status","className","isCollapsed","inEditor","active"],y=["className"],L=["className"],A=["isCollapsed","inEditor","catalogRef","contentRoot","catalogLength","contentRootLeft"];function S(e,t,o){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var n=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}(t,void 0!==o&&o<n?o:n)}return e(t,o)}var k={removed:"removed",toAdd:"toAdd",added:"added"},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object.values(k).find((function(t){return e.includes(t)}))},w=function(e){var t=e.children,o=e.pl,n=e.targetId,a=e.handleScroll,i=e.handleAction,r=e.index,d=e.status,u=e.className,g=e.isCollapsed,h=e.inEditor,v=e.active,m=c()(e,O);return Object(j.g)(x.a,l()({as:p.Text,zaType:"Text",className:f()(u,"Catalog-Title"),flexShrink:0,display:"flex",alignItems:"center",color:"GBL05A",fontSize:"12px",height:"20px",lineHeight:"20px",pl:"30px",css:function(e){return{position:"relative",height:"30px",lineHeight:"30px","&.Catalog-FirstLevelTitle, &.Catalog-SecondLevelTitle":{position:"relative",height:"30px",color:v?e.colors.GBL01A:e.colors.GBL05A,"&::before":{content:'" "',position:"absolute",backgroundColor:v?e.colors.GBL01A:e.colors.GBL05A,display:"inline-block",borderRadius:"50%",top:"12px",marginRight:"12px"},"&:hover::before":{backgroundColor:e.colors.GBL01A}},"&.Catalog-FirstLevelTitle::before":{left:g?"78px":"16px",width:"6px",height:"6px"},"&.Catalog-SecondLevelTitle::before":{left:g?"79px":"17px",width:"4px",height:"4px"},".Catalog-TitleIcon":Object.assign({position:"absolute",right:"10px",width:"12px",height:"12px",objectFit:"contain"},("toAdd"!==d||!t)&&{display:"none"}),"&::after":{content:'" "',display:"block",position:"absolute",left:g?"81px":"19px",top:0,transform:"translateX(-50%)",width:"2px",height:"40px",marginTop:"12px",background:e.colorMod(e.colors.GBL05A).alpha(.12)},"&:last-child":{"&::after":{height:0}}}}},m,{onClick:function(e){a(e,r)}}),!g&&Object(j.g)(p.Flex,{px:"10px",ml:o,css:function(e){return Object.assign(Object.assign({cursor:"pointer",alignItems:"center",width:"100%"},"toAdd"===d&&Boolean(t)&&{color:e.colors.GBL01A,background:e.colors.GBK09A,borderRadius:"4px"}),{},{"&:hover":{color:e.colors.GBL01A,background:e.colors.GBK09A,borderRadius:"4px",".Catalog-TitleIcon":{display:"block"}}})},"data-catalog-target-id":n,"data-za-detail-view-id":"9745","data-za-detail-view-action":"Click","data-za-detail-view-name":"正文"},Object(j.g)(p.Text,{css:Object(s.a)([Object(b.a)(1),{pointerEvents:"none",wordBreak:"break-all",width:"calc(100% - 22px)"}],""),dangerouslySetInnerHTML:{__html:t}}),h&&("toAdd"===d?Object(j.g)(p.Image,{src:"https://pic3.zhimg.com/v2-b01c062116d91b98059d7c90bb1139d2.png",className:"Catalog-TitleIcon",onClick:function(e){e.stopPropagation(),i(e,r,k.added)}}):Object(j.g)(p.Image,{src:"https://pic2.zhimg.com/v2-4bf4e045dbe37447d257b72b5a79b05c.png",className:"Catalog-TitleIcon",onClick:function(e){e.stopPropagation(),i(e,r,k.removed)}}))))},B={name:"1nnq2op",styles:"&+.Catalog-FirstLevelTitle{margin-top:4px;}&+.Catalog-SecondLevelTitle{margin-top:4px;}"},I=function(e){var t=e.className,o=c()(e,y);return Object(j.g)(w,l()({className:f()(t,"Catalog-FirstLevelTitle"),fontWeight:"500",css:B},o))},z={name:"1nnq2op",styles:"&+.Catalog-FirstLevelTitle{margin-top:4px;}&+.Catalog-SecondLevelTitle{margin-top:4px;}"},E={1:I,2:function(e){var t=e.className,o=c()(e,L);return Object(j.g)(w,l()({className:f()(t,"Catalog-SecondLevelTitle"),pl:"10px",fontWeight:"400",css:z},o))}},R=function(e){var t,o,n=e.isCollapsed,i=e.inEditor,r=e.catalogRef,u=e.contentRoot,g=e.catalogLength,f=e.contentRootLeft,b=c()(e,A),h=Object(d.useState)(0),v=S(a.a,h,2),m=v[0],C=v[1];return Object(d.useEffect)((function(){var e,t=null===(e=r.current)||void 0===e?void 0:e.clientHeight;i||C(-t)}),[r,i,f]),Object(d.useEffect)((function(){if(i)if(0===g)-267!==m&&C(-267);else{var e=76+34*g,t=parseInt(getComputedStyle(r.current).height),o=-Math.min(t,e);m!==o&&C(o)}}),[i,g,r,m]),i||u?(i?(t=180,o=-180):f<190?(t=76,o=-20):n?(t=100,o=-120):o=-(t=Math.min(f-40,250))-30,Object(j.g)(x.b,{block:i?"EditPage":"AnswerPage"},Object(j.g)(x.f,l()({ref:r,zaType:"Block",as:p.Box,css:Object(s.a)({position:"sticky",top:0,width:t,marginLeft:o,marginBottom:m,zIndex:1},"")},b)))):null},G={name:"3n0dwa",styles:"width:15px;height:15px;cursor:pointer;"},N={name:"zizye5",styles:"border-radius:10px;cursor:pointer;"},F=function(e){var t=e.isCollapsed,o=e.isCollapsedChange,n=e.contentRootLeft,a=e.inEditor,i=e.onClose;return Object(j.g)(p.Flex,{px:"10px",py:"8px",bg:"GBK99A",alignItems:"center",justifyContent:"space-between",color:"GBL05A",css:Object(s.a)({width:"100%",height:"40px",borderRadius:t?!a&&n>=190?"4px 0px 0px 4px":"0px 4px 4px 0px":"4px",position:"sticky",top:"0",zIndex:"1",boxShadow:"0px 1px 3px rgba(18, 18, 18, 0.1)"},"")},Object(j.g)(p.Flex,{alignItems:"center"},Object(j.g)(u.c,{size:15,text:!0,center:!0}),Object(j.g)(x.a,{as:p.Text,zaType:"Button",zaText:!0,shouldTrackClick:t,ml:"10px",fontSize:"14px",css:t&&{cursor:"pointer",whiteSpace:"nowrap"},onClick:function(){t&&o(!1)}},t&&!a&&n>=190?"展开目录":"目录")),a&&Object(j.g)(p.Image,{src:"https://pic1.zhimg.com/v2-6264c104a2b3efcd0bd3c4876232aec3.png",onClick:i,css:G}),!a&&!t&&Object(j.g)(x.a,{as:p.Text,zaType:"Button",zaText:"收起目录",p:"2px 6px",bg:"GBK10A",color:"GBL05A",fontSize:"12px",lineHeight:"16px",css:N,onClick:function(){o(!0)}},"收起"))};t.b=function(e){var t=e.catalog,o=e.className,n=e.inEditor,i=e.scrollOffset,c=void 0===i?0:i,r=e.onClose,l=e.contentRoot,s=e.onChange,u=e.catalogRef,g=e.autoCalcShouldShow,b=e.maskGradientColor,x=void 0===b?"GBK10A":b,h=Object(d.useRef)(),O=Object(d.useRef)(),y=u||h,L=Object(d.useState)(!n),A=S(a.a,L,2),T=A[0],w=A[1],B=Object(d.useState)(0),z=S(a.a,B,2),G=z[0],N=z[1],H=Object(d.useState)(null),q=S(a.a,H,2),M=q[0],K=q[1],D=Object(d.useState)(!1),P=S(a.a,D,2),W=P[0],_=P[1],J=Object(d.useState)(!1),V=S(a.a,J,2),X=V[0],Q=V[1],U=Object(d.useState)(!1),Y=S(a.a,U,2),Z=Y[0],$=Y[1];Object(C.a)(null==y?void 0:y.current,l);var ee=Object(d.useCallback)((function(e,t){if(n){var o=document.querySelector(".DraftEditor-editorContainer");if(o){var a=Array.from(o.querySelectorAll("h2,h3"))[t];a&&requestAnimationFrame((function(){return Object(m.a)(a,c)}))}}}),[n,c]),te=Object(d.useCallback)((function(e,o,n){var a=document.querySelector(".DraftEditor-editorContainer");if(a){var i=Array.from(a.querySelectorAll("h2,h3"))[o].getAttribute("data-offset-key").split("-")[0];t[o].status=k.removed,s(i,n)}}),[t,s]);Object(d.useEffect)((function(){if(l){var e=l.getBoundingClientRect().left;N(e),e>=190&&w(!1)}}),[l]);var oe=(null==O?void 0:O.current)||{},ne=oe.scrollHeight,ae=oe.clientHeight;Object(d.useEffect)((function(){_(ne>ae)}),[ne,ae]);var ie=Object(d.useMemo)((function(){return null==t?void 0:t.filter((function(e){return e.status!==k.removed}))}),[t]).length,ce=v()((function(){var e,o,a;if(!ie||n||T||(o=null,a=Object(m.b)(),t.forEach((function(e){if(e.status!==k.removed){var t=document.querySelector("#"+e.targetId);(null==t?void 0:t.getBoundingClientRect().top)<=a+2&&(o=e.targetId)}})),o!==M&&(K(o),null===(e=document.querySelector('[data-catalog-target-id="'.concat(o,'"]')))||void 0===e||e.scrollIntoViewIfNeeded())),null!=y&&y.current&&g){var i,c=null!=l?l:null==y||null===(i=y.current)||void 0===i?void 0:i.parentElement;if(c&&null!=y&&y.current){var r=c.getBoundingClientRect(),s=r.bottom,d=r.height,p=getComputedStyle(c),u=p.paddingTop,f=p.marginTop,b=y.current.getBoundingClientRect(),x=b.bottom,h=b.height;s-x<Math.min(0,d-(h+parseInt(u)+parseInt(f)))?y.current.style.visibility="hidden":y.current.style.visibility="visible"}}}),100);Object(d.useEffect)((function(){return document.addEventListener("scroll",ce),function(){document.removeEventListener("scroll",ce)}}),[l,ce]);var re=v()((function(){var e;(null===(e=O.current)||void 0===e?void 0:e.scrollTop)<20?Q(!1):Q(!0);var t=O.current||{},o=t.scrollHeight,n=t.clientHeight,a=t.scrollTop;$(!(o-n-a<20))}),100);return Object(d.useEffect)((function(){var e=O.current;if(e)return e.addEventListener("scroll",re),function(){return e.removeEventListener("scroll",re)}}),[O,re]),n||ie&&l?Object(j.g)(R,{catalogRef:y,catalogLength:ie,inEditor:n,isCollapsed:T,contentRoot:l,contentRootLeft:G,className:f()(o,"Catalog","isCatalogV2",{isCollapsed:T}),pb:"20px","data-za-detail-view-name":"正文"},Object(j.g)(F,{inEditor:n,isCollapsed:T,contentRootLeft:G,isCollapsedChange:w,onClose:r}),(G>=190||n)&&(ie?Object(j.g)(p.Box,{mt:"20px",ref:O,css:function(e){return Object.assign({maxHeight:"calc(100vh - 200px)",overflow:"scroll",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},W&&{"&::before, &::after":{content:'" "',position:"absolute",width:"calc(100% - 15px)",height:"36px",pointerEvents:"none",marginLeft:"15px",zIndex:1,transition:"opacity .2s ease-in-out"},"&::before":{opacity:X?1:0,top:"60px",background:"linear-gradient(180deg, ".concat(e.colors[x]," 0%, ").concat(e.colorMod(e.colors[x]).alpha(0)," 100%)")},"&::after":{opacity:Z?1:0,bottom:"20px",background:"linear-gradient(180deg, ".concat(e.colorMod(e.colors[x]).alpha(0)," 0%, ").concat(e.colors[x]," 100%)")}})}},Object(j.g)(p.Flex,{className:"Catalog-content",flexDirection:"column",fontSize:"12px"},t.map((function(e){var t=e.titleLevel,o=e.text,a=e.targetId,i=e.status,c=e.index,r=E[t]||I;return i!==k.removed?Object(j.g)(r,{key:String([a,c]),targetId:a,handleScroll:ee,handleAction:te,index:c,status:i,isCollapsed:T,inEditor:n,active:M===(a||c)},o):null})))):Object(j.g)(p.Flex,{flexDirection:"column",alignItems:"center",mb:"18px"},Object(j.g)(p.Box,{size:"160px",mb:"10px"},Object(j.g)(p.Image,{size:"100%",src:"https://pic1.zhimg.com/v2-acf70e51e6f95a027a65a9209fd6a330_r.png"})),Object(j.g)(p.Text,{color:"GBK05A",fontSize:"12px",lineHeight:"19px",textAlign:"center"},"在内容中设置标题会在此展示")))):null}}}]);
//# sourceMappingURL=column.lib_0ad37f8a.adad3b5ab7b95dd51ffc.js.map