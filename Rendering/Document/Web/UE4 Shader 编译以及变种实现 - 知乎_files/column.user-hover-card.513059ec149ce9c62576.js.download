(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{1286:function(e,t,n){"use strict";n.r(t);var a=n(23),o=n(12),r=n(13),c=n(14),l=n(15),s=n(6),i=n(0),u=n(178),d=n(302),p=n(1),b=n.n(p),h=n(20),f=Object.assign;function O(e){return b.a.createElement(h.a,f(f({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--BriefcaseFill24"+(t?" "+t:""))}),b.a.createElement("path",{fillRule:"evenodd",d:"M21.5 8.199V18.8c0 .939-.768 1.699-1.715 1.699H4.215c-.947 0-1.715-.76-1.715-1.699V8.2c0-.938.768-1.699 1.715-1.699h15.572A1.707 1.707 0 0 1 21.5 8.199ZM6.944 11.5a.75.75 0 0 0 0 1.5h10.112a.75.75 0 0 0 0-1.5H6.944Z",clipRule:"evenodd"}),b.a.createElement("path",{fillRule:"evenodd",d:"M6.75 5c0-.966.784-1.75 1.75-1.75h7c.966 0 1.75.784 1.75 1.75v2a.75.75 0 0 1-1.5 0V5a.25.25 0 0 0-.25-.25h-7a.25.25 0 0 0-.25.25v2a.75.75 0 0 1-1.5 0V5Z",clipRule:"evenodd"}));var t}function m(e){return b.a.createElement(O,f(f({},e),{className:function(){return"Zi Zi--Company"+(e.className?" "+e.className:"")}}))}var v=n(1834),j=n(328),g=n(118),w=n.n(g),y=n(11),M=n(63),k=n(4),C=n(25),N=n(19),S=n(260),R=n(83),B=n(211),x=n(517),U=n(28),E=n(131),F=n(2),T=n.n(F),P=n(7),Z=n.n(P),A=n(17),H=n(46),I=n(86),L=n(1436),_=n(152),q=n(236),G=n(66),V=n(1382),D=n(38),z=n(1634);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}var K=function(e){Object(c.a)(n,e);var t=J(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={modalShown:!1},e.handleSendMessage=function(){var t=e.props,n=t.onModalOpen,a=t.user.allowMessage,o=t.dispatch,r=t.doNotCheckAllowMessageSetting;a||void 0===a&&r?(e.setState({modalShown:!0}),n&&n()):o(Object(D.g)(U.N.blocked,"red")),N.a.trackEvent(Object(G.a)(e),{action:"Message",element:"Button",is_intent:!0})},e.handleCloseModal=function(){var t=e.props.onModalClose;e.setState({modalShown:!1}),t&&t()},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.preset,a=e.color,o=e.icon,r=e.label,c=e.className,l=e.tooltip,s=e.tooltipPreset,u=e.authRequired,d=this.state.modalShown,p="3d198a56310c02c4a83efb9f4a4c027e"===t.id;return Object(i.c)(i.a,{children:[Object(i.b)(A.c,{preset:n,color:a,className:c,icon:o,label:r,onClick:u(this.handleSendMessage,p?U.P.serviceAccountMessage:U.P.message),"data-tooltip":l,"aria-label":l,"data-tooltip-preset":s}),Object(i.b)(z.a,{memberHashId:t.id,handleCloseModal:this.handleCloseModal,isModalShow:d})]})}}]),n}(p.Component);K.propTypes={onModalOpen:T.a.func,onModalClose:T.a.func},K.defaultProps={preset:"outline",color:"grey",icon:V.a,label:"发私信",doNotCheckAllowMessageSetting:!1};var Q=Object(C.compose)(I.a,Object(y.connect)())(K),W=n(185);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}var Y=function(e){Object(c.a)(n,e);var t=X(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={reportModalShown:!1},e.handleShieldUser=function(){var t=e.props,n=t.user.urlToken,a=t.updateUserBlocking,o=t.showNotification;a(n,!1).then((function(){return o("屏蔽已取消")}))},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,a=t.user,o=a.urlToken,r=a.isBlocking,c=a.isOrg,l=t.canShowMutualFollowStatus,s=t.className,u=t.buttonClassName,d=t.onModalOpen,p=t.onModalClose,b=t.authRequired,h=this.state.reportModalShown,f=Z()("MemberButtonGroup",s);return r?Object(i.c)("div",{className:f,children:[Object(i.c)(A.c,{className:u,preset:"primary",color:"red",onClick:this.handleShieldUser,children:[Object(i.b)(L.a,{center:!0,text:!0})," 已屏蔽"]}),!c&&Object(i.c)(A.c,{className:u,onClick:b((function(){e.setState({reportModalShown:!0}),d&&d()}),U.P.report),children:["举报用户",Object(i.b)(q.a,{shown:h,onClose:function(){e.setState({reportModalShown:!1}),p&&p()},type:"member",urlToken:o,zaEnabled:!0})]})]}):Object(i.c)("div",{className:f,children:[Object(i.b)(_.a,{id:o,type:n.type,gender:n.gender,isFollowing:n.isFollowing,isFollowed:n.isFollowed,canShowMutualFollowStatus:l,className:u,preset:_.a.PRESETS.primary}),Object(i.b)(Q,{user:n,className:u,onModalOpen:d,onModalClose:p})]})}}]),n}(p.Component);Y.propTypes={user:T.a.object.isRequired,buttonClassName:T.a.string,onModalOpen:T.a.func,onModalClose:T.a.func};var $=Object(C.compose)(I.a,Object(y.connect)(null,{updateUserBlocking:W.k,showNotification:D.g}))(Y);function ee(e){var t=this,n=e.user,a=e.user.isOrg,o=e.className,r=e.buttonClassName,c=e.onModalOpen,l=e.onModalClose,s=e.authRequired,u=e.router,d=Z()("ProfileButtonGroup",o);return Object(H.l)(n)?Object(i.b)("div",{className:d,children:Object(i.c)(A.c,{color:"blue",className:r,onClick:s((function(){N.a.trackEvent(t,{action:"OpenUrl",element:"Link"},{link:{url:"".concat(location.origin,"/people/edit")}}),u.push("/people/edit")}),U.P.editProfile),children:["编辑",a?"机构":"个人","资料"]})}):Object(i.b)($,{user:n,canShowMutualFollowStatus:!0,className:d,buttonClassName:r,onModalOpen:c,onModalClose:l})}ee.propTypes={user:T.a.object.isRequired,buttonClassName:T.a.string,onModalOpen:T.a.func,onModalClose:T.a.func};var te=Object(C.compose)(M.withRouter,I.a)(ee),ne=n(876),ae=n(877),oe=n(108),re=["toggler","user","id","urlToken","mutuals","onRef","currentUser"];function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}var le=function(e,t){return e.map((function(e){return t[e]})).slice(0,3)},se=Object(R.isBrowser)()?w()(le,(function(e,t){return"".concat(e.join(","),"-").concat(t.length)})):le,ie=[];var ue=function(e){return Object(i.b)(k.Flex,Object.assign({css:{"&:not(:last-child)":{marginBottom:8}}},e))},de=function(e){Object(c.a)(n,e);var t=ce(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!1,childModalOpened:!1},e.loadUserProfile=function(){var t=e.props,n=t.id,a=t.urlToken;return(0,t.dispatch)(Object(W.h)(a||n,!1))},e.load=function(){var t=e.props,n=t.id;(t.urlToken||n)&&(e.setState({isLoading:!0}),e.loadUserProfile().then((function(){return e.setState({isLoading:!1})})),e.loadMutuals())},e.loadMutuals=function(){var t=e.props,n=t.user,a=t.dispatch,o=t.mutuals,r=void 0===o?[]:o,c=t.currentUser;return!r.length&&c&&n?a(Object(W.f)(n.urlToken,"mutuals")):Promise.resolve()},e.track=function(){var t=e.props.user;e.hoverCardElement&&t&&(N.a.setModule(e.hoverCardElement,{module:"UserItem"},{card:{content:{type:"User",member_hash_id:t.id}}}),N.a.trackCardShow(e.hoverCardElement))},e.handleOpen=function(){e.load(),e.track()},e}return Object(r.a)(n,[{key:"render",value:function(){var e,t,n=this,o=this.props,r=o.toggler,c=o.user,l=o.id,s=o.urlToken,p=o.mutuals,b=void 0===p?[]:p,h=o.onRef,f=o.currentUser,O=Object(a.default)(o,re),g=c||{},w=g.isOrg,y=g.headline,C=g.avatarUrl,N=g.badge,R=g.badgeV2,E=g.answerCount,F=g.articlesCount,T=g.followerCount,P=g.employments,Z=g.coverUrl,A=g.gender,H=g.isFollowed,I=g.isFollowing,L=this.state,_=L.isLoading,q=L.childModalOpened,G=b.length,V=Object(u.d)(R||N),D=V.bestAnswerer,z=V.identity,J="//www.zhihu.com/".concat(w?"org":"people","/").concat(s||l),K=f&&c&&f.urlToken===c.urlToken,Q=G>0&&!K,W=P&&P[0];if(null!=z&&z.length)t=Object(i.c)(ue,{children:[Object(i.b)("a",{href:"".concat(U.x,"/account/verification/intro"),target:"_blank",rel:"noopener noreferrer",css:{marginRight:".3em"},children:Object(i.b)(u.a,{})}),Object(i.b)("div",{children:z.slice(0,2).map((function(e){return e.description})).join("，")})]});else if(W){var X=W.company,Y=W.job;t=Object(i.c)(ue,{children:[(X||Y)&&Object(i.b)(k.Box,{as:"span",mr:".3em",color:"GBL05A",children:Object(i.b)(m,{text:!0,center:!0})}),Object(i.c)("div",{children:[X&&X.name,X&&Y&&Object(i.b)(k.Box,{display:"inline-block",width:"1px",height:"10px",mx:"8px",bg:"GBK09A"}),Y&&Y.name]})]})}else t=null;return Object(i.c)(d.b,Object.assign(Object.assign({toggler:r,onOpen:this.handleOpen,isLoading:_,globalClose:!q,stickHover:q,preventCloseOnTarget:!0},O),{},{ref:function(e){h&&"function"==typeof h&&h(e),n.hoverCardElement=e},children:[Object(i.b)(d.a,{coverUrl:Z,title:Object(i.c)("span",{css:{display:"flex"},children:[Object(i.b)(x.a,{user:c,noHoverCard:!0}),Object(i.b)(ae.a,{isFollowed:H,isFollowing:I})]}),subtitle:y&&Object(i.b)(S.a,{inline:!0,html:y}),avatarUrl:C}),(t||D||Q)&&Object(i.c)("div",{children:[t,Boolean(null==D||null===(e=D.topics)||void 0===e?void 0:e.length)&&Object(i.c)(ue,{children:[Object(i.b)("span",{css:{marginRight:".3em"},children:Object(i.b)(u.b,{})}),Object(i.c)("div",{children:[Object(i.b)(ne.a,{expandable:!1,noHoverCard:!0,topics:D.topics,user:c}),"的优秀答主"]})]}),Q&&Object(i.c)(ue,{color:"GBL05A",children:[Object(i.b)(k.Box,{mr:".3em",children:Object(i.b)(v.a,{text:!0,center:!0})}),Object(i.b)("div",{children:Object(i.c)(j.CJKSpace,{children:[b.map((function(e,t){return Object(i.c)(M.Link,{to:"//www.zhihu.com/".concat(w?"org":"people","/").concat(e.urlToken),target:"_blank",children:[e.name,t<G-1&&"、"]},t)})),"也关注了",U.H[A]]})})]})]}),Object(i.c)("div",{children:[Object(i.c)(B.a,{children:[Object(i.b)(B.a.Item,{tag:oe.a,preset:"plain",to:"".concat(J,"/answers"),name:"回答",value:E,target:"_blank"}),Object(i.b)(B.a.Item,{tag:oe.a,preset:"plain",to:"".concat(J,"/posts"),name:"文章",value:F,target:"_blank"}),Object(i.b)(B.a.Item,{tag:oe.a,preset:"plain",to:"".concat(J,"/followers"),name:"关注者",value:T,target:"_blank"})]}),c&&!K&&Object(i.b)(te,{className:"HoverCard-buttons",user:c,onModalOpen:function(){n.hoverCardElement.style.opacity="0",n.setState({childModalOpened:!0})},onModalClose:function(){return n.setState({childModalOpened:!1})}})]})]}))}}]),n}(p.PureComponent);t.default=Object(C.compose)(E.a,Object(y.connect)((function(e,t){var n=t.id,a=t.urlToken,o=e.entities,r=e.people.mutualsByUser,c=o.users[a]||Object.values(o.users).find((function(e){return e.id===n}))||t.user,l=r[a||n]||{ids:ie,isFetching:!1},s=l.ids,i=l.isFetching;return{user:c,mutuals:se(s,o.users),isFetching:i}})))(de)},1834:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(1),o=n.n(a),r=n(20),c=Object.assign;function l(e){return o.a.createElement(r.a,c(c({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:(t=e.className,"function"==typeof t?t():"ZDI ZDI--UsersFill24"+(t?" "+t:""))}),o.a.createElement("path",{fillRule:"evenodd",d:"M4.5 8A5.5 5.5 0 0 1 10 2.5 5.5 5.5 0 0 1 15.5 8a5.5 5.5 0 0 1-5.5 5.5A5.5 5.5 0 0 1 4.5 8Zm-.602 7.738c.965-1.075 2.418-1.574 4.19-1.325 1.263.178 2.56.178 3.825 0 1.77-.249 3.224.25 4.189 1.325.628.7 1.212 1.69 1.657 2.656.442.961.78 1.973.868 2.733.07.6-.424 1.023-.927 1.023H2.3c-.503 0-.997-.423-.927-1.023.088-.76.426-1.772.868-2.733.444-.967 1.029-1.956 1.657-2.656Zm12.312-2.046a.743.743 0 0 1-.309-.24.747.747 0 0 1 .081-.995c.338-.335.655-.827.92-1.37.441-.906.652-1.98.59-3.065-.036-.607-.135-1.289-.302-1.782a.75.75 0 0 1 1.42-.48c.228.672.34 1.503.379 2.176.076 1.327-.178 2.658-.739 3.809a7.991 7.991 0 0 1-.594 1.028c.89.564 1.632 1.316 2.22 2.083.768 1.002 1.308 2.075 1.585 2.907a.75.75 0 1 1-1.423.474c-.223-.668-.682-1.595-1.352-2.468-.667-.87-1.507-1.643-2.476-2.077Z",clipRule:"evenodd"}));var t}function s(e){return o.a.createElement(l,c(c({},e),{className:function(){return"Zi Zi--Users"+(e.className?" "+e.className:"")}}))}}}]);
//# sourceMappingURL=column.user-hover-card.513059ec149ce9c62576.js.map