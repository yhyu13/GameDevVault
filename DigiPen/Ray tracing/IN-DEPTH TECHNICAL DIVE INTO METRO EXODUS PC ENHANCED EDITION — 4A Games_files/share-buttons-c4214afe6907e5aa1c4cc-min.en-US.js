(function(c){function e(e){var t=e[0];var n=e[1];var r=e[2];var i,a,o=0,s=[];for(;o<t.length;o++){a=t[o];Object.prototype.hasOwnProperty.call(l,a)&&l[a]&&s.push(l[a][0]);l[a]=0}for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(c[i]=n[i]);f&&f(e);while(s.length)s.shift()();h.push.apply(h,r||[]);return u()}function u(){var e;for(var t=0;t<h.length;t++){var n=h[t];var r=true;for(var i=1;i<n.length;i++){var a=n[i];0!==l[a]&&(r=false)}if(r){h.splice(t--,1);e=o(o.s=n[0])}}return e}var n={};var l={"share-buttons":0};var h=[];function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:false,exports:{}};c[e].call(t.exports,t,t.exports,o);t.l=true;return t.exports}o.m=c;o.c=n;o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:true,get:n})};o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:true})};o.t=function(t,e){1&e&&(t=o(t));if(8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);o.r(n);Object.defineProperty(n,"default",{enumerable:true,value:t});if(2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n};o.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};o.d(e,"a",e);return e};o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};o.p="https://assets.squarespace.com/universal/scripts-compressed/";var t=window["wpJsonpStyleLoader"]=window["wpJsonpStyleLoader"]||[];var r=t.push.bind(t);t.push=e;t=t.slice();for(var i=0;i<t.length;i++)e(t[i]);var f=r;h.push(["./src/main/webapp/universal/scripts-v6/rollups/share-buttons.manifest.js","moment-js-vendor","common-vendors"]);return u()})({"./src/main/webapp/universal/scripts-v6/rollups/share-buttons.manifest.js":function(e,t,n){n("./src/main/webapp/universal/scripts-v6/share-buttons.js")},"./src/main/webapp/universal/scripts-v6/share-buttons.js":function(e,t,n){var a=n("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var o=n("./src/main/webapp/universal/src/shared/i18n/index.ts").pluralize;var s=n("./src/main/webapp/universal/src/shared/utils/SimpleLikingAPI.js");YUI.add("squarespace-share-buttons",function(c){"use strict";var t=c.config.win;var u=c.config.win.document;var l={CALLBACK_NAMESPACE:"SquarespaceShareButtonCounts"+Date.now(),SERVICE_NAMES:["facebook","linkedin","pinterest"],COUNT_KEYS:{facebook:["share","share_count"],linkedin:["count"],pinterest:["count"]},URL_KEYS:{facebook:"id",linkedin:"url",pinterest:"url"},API_BASE_URLS:{facebook:"https://graph.facebook.com/?id=",linkedin:"https://www.linkedin.com/countserv/count/share?url=",pinterest:"https://widgets.pinterest.com/v1/urls/count.json?source=6&url="}};function n(e,t){try{var n=e[l.URL_KEYS[t]];var r=u.createElement("a");r.href=n;var i=r.pathname.replace(/^\/|\/$/g,"");var a='.Share[data-item-path="'+i+'"] .Share-buttons-item[data-service="'+t+'"]';var o=c.Object.getValue(e,l.COUNT_KEYS[t])||0;var s=u.querySelectorAll(a);Array.prototype.forEach.call(s,function(e){e.querySelector(".Share-buttons-item-count").innerHTML=o})}catch(e){false}}t[l.CALLBACK_NAMESPACE]={facebook:function(e){n(e,"facebook")},linkedin:function(e){n(e,"linkedin")},pinterest:function(e){n(e,"pinterest")}};function r(e){this.container=e.container;this.like=e.like;this.ID=e.id;this.PATH=e.path;this.SHARE_LINK=t.Static.SQUARESPACE_CONTEXT.website.baseUrl+"/"+this.PATH;this.shareButtonClickHandler=this.shareButtonClickHandler.bind(this)}r.prototype={init:function(){l.SERVICE_NAMES.forEach(function(e){var t=this.container.querySelector('.Share-buttons-item[data-service="'+e+'"]');if(!t)return;this.getCount(e)},this);if(this.like){this.initializeLikes();this.isInLocalStorage(this.like)&&this.like.classList.add("is-active")}this.container.addEventListener("click",this.shareButtonClickHandler)},destroy:function(){this.container.removeEventListener("click",this.shareButtonClickHandler)},getCount:function(e){var t=u.createElement("script");t.src=[l.API_BASE_URLS[e],this.SHARE_LINK,"&callback=",l.CALLBACK_NAMESPACE,".",e].join("");u.body.appendChild(t);u.body.removeChild(t)},shareButtonClickHandler:function(e){e.preventDefault();var t=c.one(e.target).ancestor(".Share-buttons-item",true);if(!t||!t.getDOMNode())return;t=t.getDOMNode();if(!t.getAttribute("data-service"))return;this.like&&t===this.like?this.onLike():this.onShare(t)},initializeLikes:function(){s.getLikeCount(this.ID).then(function(e){this.syncLikes(e)}.bind(this)).catch(function(){this.syncLikes()}.bind(this))},syncLikes:function(e){var t=this.like.querySelector(".Share-buttons-item-label");e=e||parseInt(this.like.getAttribute("data-like-count"),10);t.innerHTML=o({one:"{%n} Like",other:"{%n} Likes"},e);this.like.setAttribute("data-like-count",e)},onLike:function(){if(this.like.classList.contains("is-active"))return;s.like(this.ID).then(function(e){if(true===e.commited){this.incrementLike();this.addToLocalStorage(this.like)}e.error&&(c.Squarespace.Utils.areCookiesEnabled()||c.config.win.alert(a("You need to enable cookies to be able to like something.")))}.bind(this)).catch(function(e){false})},incrementLike:function(){var e=parseInt(this.like.getAttribute("data-like-count"),10);e+=1;this.like.classList.add("is-active");this.syncLikes(e)},onShare:function(e){window.open(e.getAttribute("href"),a("Share"),"width=420,height=230,dialog");var t=e.querySelector(".Share-buttons-item-count");t&&(t.innerHTML=parseInt(t.innerHTML,10)+1)},onSharePopupClose:function(e,t){var n=0;var r;var i=function(){if(e.closed||n>150){clearInterval(r);this.getCount(t)}n++};r=setInterval(i.bind(this),200)},getLocalStorageKey:function(e){var t=e.getAttribute("data-service");if(e===this.like)return"squarespace-likes";if(t)return"squarespace-shares-"+t;return null},isInLocalStorage:function(e){try{if(!localStorage||!JSON)return false}catch(e){return false}var t=this.getLocalStorageKey(e);var n=JSON.parse(localStorage.getItem(t));if(n)return true===n[this.ID]},addToLocalStorage:function(e){if(!c.config.win.localStorage||!c.config.win.JSON)return false;var t=this.getLocalStorageKey(e);var n=JSON.parse(localStorage.getItem(t))||{};n[this.ID]=true;localStorage.setItem(t,JSON.stringify(n))},readCookie:function(e){var t=e+"=";var n=u.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(" "===i.charAt(0))i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}};var i=[];t.Squarespace.onInitialize(c,function(){c.all(".Share").each(function(e){e=e.getDOMNode();var t=new r({container:e,id:e.getAttribute("data-item-identifier"),path:e.getAttribute("data-item-path"),like:e.querySelector(".Share-buttons-item--like")});t.init();i.push(t)})});t.Squarespace.onDestroy(c,function(){i.forEach(function(e){e.destroy()});i.length=0})},"1.0",{requires:[]})},"./src/main/webapp/universal/src/shared/utils/SimpleLikingAPI.js":function(e,t,n){"use strict";var r=n("./common/temp/node_modules/@sqs/network/lib/index.js").default;var i=",";var a=function e(t){return r.post("/api/content-items/"+t+"/sentiment/like").then(function(e){var t=e.data;return t})};var o=[];var s=null;var c=function e(){var t=o.map(function(e){return e.itemId}).join(i);r.get("/api/blog-like-count/".concat(t)).then(function(e){var t=e.data;o.forEach(function(e){if(t.hasOwnProperty(e.itemId)){e.resolve(t[e.itemId]);return}e.reject()});o=[];s=null})};var u=function e(n){return new Promise(function(e,t){o.push({itemId:n,resolve:e,reject:t});null!==s&&clearTimeout(s);s=setTimeout(c,100)})};var l=function e(t){return u(t)};e.exports={like:a,getLikeCount:l}}});
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/share-buttons-2d07711577f15d70fab7f-min.en-US.js.map